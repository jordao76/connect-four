!function n(t,r,e){function o(u,a){if(!r[u]){if(!t[u]){var f="function"==typeof require&&require;if(!a&&f)return f(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var p=r[u]={exports:{}};t[u][0].call(p.exports,function(n){var r=t[u][1][n];return o(r?r:n)},p,p.exports,n,t,r,e)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<e.length;u++)o(e[u]);return o}({1:[function(n,t,r){var e,o,i,u,a,f,s,p,l,c,h,y,m,v,x,g,A,M,d,w,P,O,C;A=["MAX","MIN"],o=A[0],i=A[1],M=[0,1,2],f=M[0],a=M[1],u=M[2],p=[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],P=function(){var n,t,r,e,o,i,u,a,f,s;for(s=[],n=e=0;4>e;n=++e){for(t=o=0;6>o;t=++o)r=n+7*t,s.push([r,r+1,r+2,r+3]);for(t=i=0;3>i;t=++i)r=n+7*t,s.push([r,r+7+1,r+14+2,r+21+3])}for(t=u=0;3>u;t=++u){for(n=a=0;7>a;n=++a)r=n+7*t,s.push([r,r+7,r+14,r+21]);for(n=f=3;7>f;n=++f)r=n+7*t,s.push([r,r+7-1,r+14-2,r+21-3])}return s.sort(function(n,t){return Math.min.apply(Math,t)-Math.min.apply(Math,n)})}(),O=function(n){var t,r,e,o,i,u,a,s,p;for(i=0,u=P.length;u>i;i++)if(a=P[i],t=a[0],r=a[1],e=a[2],o=a[3],n[t]!==f&&n[t]===(p=n[r])&&p===(s=n[e])&&s===n[o])return n[t];return null},m=function(n,t){return O(n)===t},C=function(n,t){var r,e,o,i,u,a;return r=t[0],e=t[1],o=t[2],i=t[3],n[r]!==f&&n[r]===(a=n[e])&&a===(u=n[o])&&u===n[i]},w=function(n){var t,r,e;for(r=0,e=P.length;e>r;r++)if(t=P[r],C(n,t))return t;return[]},h=function(n){var t,r;for(t=r=0;7>r;t=++r)if(n[t]===f)return!1;return!0},y=function(n){return h(n)||!!O(n)},v=function(n){var t,r,e;for(e=[],t=r=0;7>r;t=++r)n[t]===f&&e.push(t);return e},c=function(n){var t,r,e;for(e=[],t=r=0;42>r;t=++r)n[t]===f&&e.push(t);return e},x=function(n,t){var r,e,o;for(o=e=5;e>=0;o=--e)if(r=7*o+t,n[r]===f)return r},s=function(n){var t,r;for(r=42,t=new Array(r);r--;)t[r]=n[r];return t},g=function(n,t,r){var e,o;return o=x(n,t),e=s(n),e[o]=r,e},d=[1,10,100,1e3,1e4],l=function(n){var t,r,e,o,i,f,s,p,l,c;for(l=0,e=0,o=P.length;o>e;e++){for(r=P[e],p=[0,0],c=p[0],s=p[1],f=0,i=r.length;i>f;f++)t=r[f],n[t]===a&&++c,n[t]===u&&++s;(0===c||0===s)&&(l+=d[c]-d[s])}return l},e=function(){function n(n,t,r){this.a=null!=n?n:p,this.nextPlayer=null!=t?t:a,this.depth=null!=r?r:0}return n.prototype.isWin=function(n){return m(this.a,n)},n.prototype.winOn=function(){return w(this.a)},n.prototype.winner=function(){return O(this.a)},n.prototype.isTerminal=function(){return this.depth>=7&&y(this.a)},n.prototype.nextAgent=function(){return this.nextPlayer===a?o:i},n.prototype.utility=function(){return l(this.a)},n.prototype.freePositions=function(){return c(this.a)},n.prototype.openPosition=function(n){return x(this.a,n)},n.prototype.possibleActions=function(){return v(this.a)},n.prototype.play=function(n){return new this.constructor(g(this.a,n,this.nextPlayer),this.opponent(),this.depth+1)},n.prototype.opponent=function(){return this.nextPlayer===a?u:a},n}(),t.exports={_:f,X:a,O:u,empty:p,winner:O,isWin:m,winOn:w,isFull:h,isTerminal:y,freePositions:c,openColumns:v,openPosition:x,play:g,evaluate:l,ConnectFour:e}},{}],2:[function(n,t,r){var e,o,i,u,a,f,s,p,l,c;i=n("aye-aye").MinimaxAgent,l=n("./connect-four"),e=l.ConnectFour,f=l.openColumns,o=e,p=function(n,t){return Math.floor(Math.random()*(t-n)+n)},c=function(n){var t,r,e,o,i,u;if(o=n.length,0===o)return n;for(t=e=0,i=o-1;i>=0?i>e:e>i;t=i>=0?++e:--e)r=p(t,o),u=[n[r],n[t]],n[t]=u[0],n[r]=u[1];return n},e.prototype.possibleActions=function(){return c(f(this.a))},s=null,a=null,self.onmessage=function(n){var t,r,e;switch(n.data.command){case"setup":return a=new o,r=n.data.args.depth,s=u(r);case"play":return e=n.data.args.lastAction,null!=e&&(a=a.play(e)),t=s.play(a),a=a.play(t),self.postMessage({action:t})}},u=function(n){var t;return null==n&&(n=3),t=new i(n),{play:function(n){return n.isTerminal()?void 0:t.nextAction(n)}}}},{"./connect-four":1,"aye-aye":3}],3:[function(n,t,r){var e,o,i,u;u=["MAX","MIN"],e=u[0],o=u[1],i=function(){function n(n){this.depth=null!=n?n:1/0,this.rootAgent=e}return n.prototype.nextAction=function(n){var t,r,e;return this.rootAgent=n.nextAgent(),e=this.minimax(n),t=e[0],r=e[1],r},n.prototype.minimax=function(n,t,r,o){var i;return null==t&&(t=-(1/0)),null==r&&(r=+(1/0)),null==o&&(o=0),i=n.isTerminal(),i||n.nextAgent()!==this.rootAgent||++o,o>this.depth||i?[n.utility(),null]:n.nextAgent()===e?this.maxi(n,t,r,o):this.mini(n,t,r,o)},n.prototype.maxi=function(n,t,r,e){var o,i,u,a,f,s,p,l,c,h,y,m;for(p=[-(1/0),null],m=p[0],i=p[1],l=n.possibleActions(),a=0,f=l.length;f>a;a++){if(u=l[a],y=n.play(u),c=this.minimax(y,t,r,e),s=c[0],o=c[1],s>m&&(h=[s,u],m=h[0],i=h[1]),m>=r)return[m,i];t=Math.max(t,m)}return[m,i]},n.prototype.mini=function(n,t,r,e){var o,i,u,a,f,s,p,l,c,h,y,m;for(p=[+(1/0),null],m=p[0],i=p[1],l=n.possibleActions(),a=0,f=l.length;f>a;a++){if(u=l[a],y=n.play(u),c=this.minimax(y,t,r,e),s=c[0],o=c[1],m>s&&(h=[s,u],m=h[0],i=h[1]),t>=m)return[m,i];r=Math.min(r,m)}return[m,i]},n}(),t.exports={MAX:e,MIN:o,MinimaxAgent:i}},{}]},{},[2]);
//# sourceMappingURL=minimax-worker.min.js.map
