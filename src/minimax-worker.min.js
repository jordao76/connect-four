!function(){function n(t,r,e){function o(u,a){if(!r[u]){if(!t[u]){var f="function"==typeof require&&require;if(!a&&f)return f(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var p=r[u]={exports:{}};t[u][0].call(p.exports,function(n){var r=t[u][1][n];return o(r||n)},p,p.exports,n,t,r,e)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<e.length;u++)o(e[u]);return o}return n}()({1:[function(n,t,r){var e,o,i,u,a,f,s,p,l,c,h,y,m,v,x,g,A,M,d,P,w,O,N,T;A=n("aye-aye"),o=A.MAX,i=A.MIN,M=[0,1,2],f=M[0],a=M[1],u=M[2],p=[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],O=function(){var n,t,r,e,o,i,u,a,f,s;for(s=[],n=e=0;e<4;n=++e){for(t=o=0;o<6;t=++o)r=n+7*t,s.push([r,r+1,r+2,r+3]);for(t=i=0;i<3;t=++i)r=n+7*t,s.push([r,r+7+1,r+14+2,r+21+3])}for(t=u=0;u<3;t=++u){for(n=a=0;a<7;n=++a)r=n+7*t,s.push([r,r+7,r+14,r+21]);for(n=f=3;f<7;n=++f)r=n+7*t,s.push([r,r+7-1,r+14-2,r+21-3])}return s.sort(function(n,t){return Math.min.apply(Math,t)-Math.min.apply(Math,n)})}(),N=function(n){var t,r,e,o,i,u,a,s,p;for(i=0,u=O.length;i<u;i++)if(a=O[i],t=a[0],r=a[1],e=a[2],o=a[3],n[t]!==f&&n[t]===(p=n[r])&&p===(s=n[e])&&s===n[o])return n[t];return null},m=function(n,t){return N(n)===t},T=function(n,t){var r,e,o,i,u,a;return r=t[0],e=t[1],o=t[2],i=t[3],n[r]!==f&&n[r]===(a=n[e])&&a===(u=n[o])&&u===n[i]},w=function(n){var t,r,e;for(r=0,e=O.length;r<e;r++)if(t=O[r],T(n,t))return t;return[]},h=function(n){var t,r;for(t=r=0;r<7;t=++r)if(n[t]===f)return!1;return!0},y=function(n){return h(n)||!!N(n)},v=function(n){var t,r,e;for(e=[],t=r=0;r<7;t=++r)n[t]===f&&e.push(t);return e},c=function(n){var t,r,e;for(e=[],t=r=0;r<42;t=++r)n[t]===f&&e.push(t);return e},x=function(n,t){var r,e,o;for(o=e=5;e>=0;o=--e)if(r=7*o+t,n[r]===f)return r},s=function(n){var t,r;for(r=42,t=new Array(r);r--;)t[r]=n[r];return t},g=function(n,t,r){var e,o;return o=x(n,t),e=s(n),e[o]=r,e},P=[1,10,100,1e3,1e4],l=function(n){var t,r,e,o,i,f,s,p,l,c;for(l=0,e=0,o=O.length;e<o;e++){for(r=O[e],p=[0,0],c=p[0],s=p[1],f=0,i=r.length;f<i;f++)t=r[f],n[t]===a&&++c,n[t]===u&&++s;0!==c&&0!==s||(l+=P[c]-P[s])}return l},d=function(n){var t,r,e,o,i,f;for(t="",f=e=0;e<6;f=++e){for(r=o=0;o<7;r=++o)i=n[7*f+r],t+=i===a?"X ":i===u?"O ":"_ ";t+="\n"}return t},e=function(){function n(n,t,r){this.a=null!=n?n:p,this.nextPlayer=null!=t?t:a,this.depth=null!=r?r:0}return n.prototype.isWin=function(n){return m(this.a,n)},n.prototype.winOn=function(){return w(this.a)},n.prototype.winner=function(){return N(this.a)},n.prototype.isTerminal=function(){return this.depth>=7&&y(this.a)},n.prototype.nextAgent=function(){return this.nextPlayer===a?o:i},n.prototype.utility=function(){return l(this.a)},n.prototype.freePositions=function(){return c(this.a)},n.prototype.openPosition=function(n){return x(this.a,n)},n.prototype.possibleActions=function(){return v(this.a)},n.prototype.play=function(n){return new this.constructor(g(this.a,n,this.nextPlayer),this.opponent(),this.depth+1)},n.prototype.opponent=function(){return this.nextPlayer===a?u:a},n.prototype.toString=function(){return d(this.a)},n}(),t.exports={_:f,X:a,O:u,empty:p,winner:N,isWin:m,winOn:w,isFull:h,isTerminal:y,freePositions:c,openColumns:v,openPosition:x,play:g,evaluate:l,ConnectFour:e}},{"aye-aye":4}],2:[function(n,t,r){var e,o,i,u,a,f,s,p,l,c;i=n("aye-aye").MinimaxAgent,l=n("./connect-four"),e=l.ConnectFour,f=l.openColumns,o=e,p=function(n,t){return Math.floor(Math.random()*(t-n)+n)},c=function(n){var t,r,e,o,i,u;if(o=n.length,0===o)return n;for(t=e=0,i=o-1;0<=i?e<i:e>i;t=0<=i?++e:--e)r=p(t,o),u=[n[r],n[t]],n[t]=u[0],n[r]=u[1];return n},e.prototype.possibleActions=function(){return c(f(this.a))},s=null,a=null,self.onmessage=function(n){var t,r,e;switch(n.data.command){case"setup":return a=new o,r=n.data.args.depth,s=u(r);case"play":return e=n.data.args.lastAction,null!=e&&(a=a.play(e)),t=s.play(a),a=a.play(t),self.postMessage({action:t})}},u=function(n){var t;return null==n&&(n=3),t=new i(n),{play:function(n){if(!n.isTerminal())return t.nextAction(n)}}}},{"./connect-four":1,"aye-aye":4}],3:[function(n,t,r){var e,o,i;i=[1,2],e=i[0],o=i[1],t.exports={P1:e,P2:o}},{}],4:[function(n,t,r){var e,o,i,u,a,f,s,p;s=n("./game"),a=s.P1,f=s.P2,p=[a,f],o=p[0],i=p[1],e=Number.MAX_SAFE_INTEGER,u=function(){function n(n){this.depth=null!=n?n:e,this.rootAgent=o}return n.prototype.nextAction=function(n){var t,r,e;return this.rootAgent=n.nextAgent(),e=this.minimax(n),t=e[0],r=e[1],r},n.prototype.minimax=function(n,t,r,i){var u;return null==t&&(t=-e),null==r&&(r=+e),null==i&&(i=0),u=n.isTerminal(),u||n.nextAgent()!==this.rootAgent||++i,i>this.depth||u?[n.utility(),null]:n.nextAgent()===o?this.maxi(n,t,r,i):this.mini(n,t,r,i)},n.prototype.maxi=function(n,t,r,o){var i,u,a,f,s,p,l,c,h,y,m,v;for(l=[-e,null],v=l[0],u=l[1],c=n.possibleActions(),f=0,s=c.length;f<s;f++){if(a=c[f],m=n.play(a),h=this.minimax(m,t,r,o),p=h[0],i=h[1],p>v&&(y=[p,a],v=y[0],u=y[1]),v>=r)return[v,u];t=Math.max(t,v)}return[v,u]},n.prototype.mini=function(n,t,r,o){var i,u,a,f,s,p,l,c,h,y,m,v;for(l=[+e,null],v=l[0],u=l[1],c=n.possibleActions(),f=0,s=c.length;f<s;f++){if(a=c[f],m=n.play(a),h=this.minimax(m,t,r,o),p=h[0],i=h[1],p<v&&(y=[p,a],v=y[0],u=y[1]),v<=t)return[v,u];r=Math.min(r,v)}return[v,u]},n}(),t.exports={MAX:o,MIN:i,Limit:e,MinimaxAgent:u}},{"./game":3}]},{},[2]);
//# sourceMappingURL=minimax-worker.min.js.map
