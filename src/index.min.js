!function(){function n(t,r,e){function i(u,a){if(!r[u]){if(!t[u]){var l="function"==typeof require&&require;if(!a&&l)return l(u,!0);if(o)return o(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=r[u]={exports:{}};t[u][0].call(f.exports,function(n){var r=t[u][1][n];return i(r||n)},f,f.exports,n,t,r,e)}return r[u].exports}for(var o="function"==typeof require&&require,u=0;u<e.length;u++)i(e[u]);return i}return n}()({1:[function(n,t,r){var e,i,o,u,a,l,s,f,p,c,h,y,m,v,x,d,g,w,A,P,b,C,M,O;g=n("aye-aye"),i=g.MAX,o=g.MIN,w=[0,1,2],l=w[0],a=w[1],u=w[2],f=[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],C=function(){var n,t,r,e,i,o,u,a,l,s;for(s=[],n=e=0;e<4;n=++e){for(t=i=0;i<6;t=++i)r=n+7*t,s.push([r,r+1,r+2,r+3]);for(t=o=0;o<3;t=++o)r=n+7*t,s.push([r,r+7+1,r+14+2,r+21+3])}for(t=u=0;u<3;t=++u){for(n=a=0;a<7;n=++a)r=n+7*t,s.push([r,r+7,r+14,r+21]);for(n=l=3;l<7;n=++l)r=n+7*t,s.push([r,r+7-1,r+14-2,r+21-3])}return s.sort(function(n,t){return Math.min.apply(Math,t)-Math.min.apply(Math,n)})}(),M=function(n){var t,r,e,i,o,u,a,s,f;for(o=0,u=C.length;o<u;o++)if(a=C[o],t=a[0],r=a[1],e=a[2],i=a[3],n[t]!==l&&n[t]===(f=n[r])&&f===(s=n[e])&&s===n[i])return n[t];return null},m=function(n,t){return M(n)===t},O=function(n,t){var r,e,i,o,u,a;return r=t[0],e=t[1],i=t[2],o=t[3],n[r]!==l&&n[r]===(a=n[e])&&a===(u=n[i])&&u===n[o]},b=function(n){var t,r,e;for(r=0,e=C.length;r<e;r++)if(t=C[r],O(n,t))return t;return[]},h=function(n){var t,r;for(t=r=0;r<7;t=++r)if(n[t]===l)return!1;return!0},y=function(n){return h(n)||!!M(n)},v=function(n){var t,r,e;for(e=[],t=r=0;r<7;t=++r)n[t]===l&&e.push(t);return e},c=function(n){var t,r,e;for(e=[],t=r=0;r<42;t=++r)n[t]===l&&e.push(t);return e},x=function(n,t){var r,e,i;for(i=e=5;e>=0;i=--e)if(r=7*i+t,n[r]===l)return r},s=function(n){var t,r;for(r=42,t=new Array(r);r--;)t[r]=n[r];return t},d=function(n,t,r){var e,i;return i=x(n,t),e=s(n),e[i]=r,e},P=[1,10,100,1e3,1e4],p=function(n){var t,r,e,i,o,l,s,f,p,c;for(p=0,e=0,i=C.length;e<i;e++){for(r=C[e],f=[0,0],c=f[0],s=f[1],l=0,o=r.length;l<o;l++)t=r[l],n[t]===a&&++c,n[t]===u&&++s;0!==c&&0!==s||(p+=P[c]-P[s])}return p},A=function(n){var t,r,e,i,o,l;for(t="",l=e=0;e<6;l=++e){for(r=i=0;i<7;r=++i)o=n[7*l+r],t+=o===a?"X ":o===u?"O ":"_ ";t+="\n"}return t},e=function(){function n(n,t,r){this.a=null!=n?n:f,this.nextPlayer=null!=t?t:a,this.depth=null!=r?r:0}return n.prototype.isWin=function(n){return m(this.a,n)},n.prototype.winOn=function(){return b(this.a)},n.prototype.winner=function(){return M(this.a)},n.prototype.isTerminal=function(){return this.depth>=7&&y(this.a)},n.prototype.nextAgent=function(){return this.nextPlayer===a?i:o},n.prototype.utility=function(){return p(this.a)},n.prototype.freePositions=function(){return c(this.a)},n.prototype.openPosition=function(n){return x(this.a,n)},n.prototype.possibleActions=function(){return v(this.a)},n.prototype.play=function(n){return new this.constructor(d(this.a,n,this.nextPlayer),this.opponent(),this.depth+1)},n.prototype.opponent=function(){return this.nextPlayer===a?u:a},n.prototype.toString=function(){return A(this.a)},n}(),t.exports={_:l,X:a,O:u,empty:f,winner:M,isWin:m,winOn:b,isFull:h,isTerminal:y,freePositions:c,openColumns:v,openPosition:x,play:d,evaluate:p,ConnectFour:e}},{"aye-aye":5}],2:[function(n,t,r){var e,i,o,u,a,l,s,f;e=jQuery,l=n("./connect-four"),u=l.X,o=l.O,i=l.ConnectFour,s=n("./spinner"),f=s.showSpinner,a=s.hideSpinner,e(function(){var n,t,r,l,s,p,c,h,y,m,v,x,d,g,w,A,P,b,C;return s=null,c=null,x=function(){var n,t,r,i,o;for(n=s.nextPlayer===u?"x-playable-tile":"o-playable-tile",o=s.freePositions(),r=0,i=o.length;r<i;r++)t=o[r],e("#"+t).addClass(n);return n},C=function(){return e(".tile").removeClass("x-playable-tile").removeClass("o-playable-tile").removeClass("human-playable-tile").off("click")},h=function(){var n,t,r,i,o,a;for(i=s.winOn(),o=[],t=0,r=i.length;t<r;t++)n=i[t],a=s.isWin(u)?"x-won-tile":"o-won-tile",o.push(e("#"+n).addClass(a));return o},n=function(){var n;return!!s.isTerminal()&&(n=function(){switch(!1){case!s.isWin(u):return"Green Wins!";case!s.isWin(o):return"Red Wins!";default:return"Draw!"}}(),e("#end-text").text(n),e("#modal-game-over").modal("show"),!0)},v=function(n){var t,r,i;return t=n%7,a(),r=s.openPosition(t),i=s.nextPlayer===u?"x":"o",e("#"+r).addClass(i+"-tile"),s=s.play(n),c=n,m()},g=null,d=null,m=function(){var n;return C(),h(),n=s.nextPlayer===u?g:d,n.play()},w={human:function(){return p()},"starter AI":function(){return t(3)},"smart AI":function(){return t(4)}},l=function(){var n;return n=e("#btn-player-x").text(),w[n]()},r=function(){var n;return n=e("#btn-player-o").text(),w[n]()},P=function(){var n,t,r;return t=e("#btn-player-x"),n=e("#btn-player-o"),r=t.text(),t.text(n.text()),n.text(r)},e(".player").on("click",function(){var n,t,r,i,o;if(t=e(this),i=t.data("player-for"),n=e("#btn-player-"+i),o=t.text(),r=n.text(),r!==o)return n.text(o),A()}),p=function(){var t;return t=function(n){return parseInt(n,10)},{setup:function(n){return n()},play:function(){var r;if(!n())return r=x(),e("."+r).addClass("human-playable-tile").on("click",function(){var n,r;return n=e(this),r=t(n.get(0).id),v(r)})}}},t=function(t){var r;return null==t&&(t=3),r=new Worker("src/minimax-worker.min.js"),{setup:function(n){return r.onmessage=function(n){return v(n.data.action)},r.postMessage({command:"setup",args:{depth:t}}),n()},play:function(){if(!n())return x(),f(),r.postMessage({command:"play",args:{lastAction:c}})},teardown:function(){return r.terminate()}}},A=function(){var n;return b(),s=new i,s.lastPlayedPosition=null,c=null,n=[l(),r()],g=n[0],d=n[1],g.setup(function(){return d.setup(function(){return m()})})},b=function(){return null!=g&&"function"==typeof g.teardown&&g.teardown(),null!=d&&"function"==typeof d.teardown&&d.teardown(),a(),e(".tile").removeClass("x-tile").removeClass("o-tile").removeClass("x-won-tile").removeClass("o-won-tile")},y=function(){return P(),A()},e("#btn-new-game").on("click",y),A()})},{"./connect-four":1,"./spinner":3}],3:[function(n,t,r){var e,i,o,u,a,l;e=jQuery,u=new Spinner({lines:9,radius:7,length:7}),l=null,a=100,o=function(){var n;if(null==l)return n=e("#spinner").get(0),l=setTimeout(function(){return u.spin(n)},a)},i=function(){return null!=l&&clearTimeout(l),u.stop(),l=null},t.exports={showSpinner:o,hideSpinner:i}},{}],4:[function(n,t,r){var e,i,o;o=[1,2],e=o[0],i=o[1],t.exports={P1:e,P2:i}},{}],5:[function(n,t,r){var e,i,o,u,a,l,s,f;s=n("./game"),a=s.P1,l=s.P2,f=[a,l],i=f[0],o=f[1],e=Number.MAX_SAFE_INTEGER,u=function(){function n(n){this.depth=null!=n?n:e,this.rootAgent=i}return n.prototype.nextAction=function(n){var t,r,e;return this.rootAgent=n.nextAgent(),e=this.minimax(n),t=e[0],r=e[1],r},n.prototype.minimax=function(n,t,r,o){var u;return null==t&&(t=-e),null==r&&(r=+e),null==o&&(o=0),u=n.isTerminal(),u||n.nextAgent()!==this.rootAgent||++o,o>this.depth||u?[n.utility(),null]:n.nextAgent()===i?this.maxi(n,t,r,o):this.mini(n,t,r,o)},n.prototype.maxi=function(n,t,r,i){var o,u,a,l,s,f,p,c,h,y,m,v;for(p=[-e,null],v=p[0],u=p[1],c=n.possibleActions(),l=0,s=c.length;l<s;l++){if(a=c[l],m=n.play(a),h=this.minimax(m,t,r,i),f=h[0],o=h[1],f>v&&(y=[f,a],v=y[0],u=y[1]),v>=r)return[v,u];t=Math.max(t,v)}return[v,u]},n.prototype.mini=function(n,t,r,i){var o,u,a,l,s,f,p,c,h,y,m,v;for(p=[+e,null],v=p[0],u=p[1],c=n.possibleActions(),l=0,s=c.length;l<s;l++){if(a=c[l],m=n.play(a),h=this.minimax(m,t,r,i),f=h[0],o=h[1],f<v&&(y=[f,a],v=y[0],u=y[1]),v<=t)return[v,u];r=Math.min(r,v)}return[v,u]},n}(),t.exports={MAX:i,MIN:o,Limit:e,MinimaxAgent:u}},{"./game":4}]},{},[2]);
//# sourceMappingURL=index.min.js.map
